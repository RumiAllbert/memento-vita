---
import Layout from '../layouts/Layout.astro';
import Onboarding from '../components/Onboarding.tsx';
---

<Layout
  title="Memento Vitae — Visualize Your Life"
  description="Your life is about 4,000 weeks. See how many you have left."
>
  <div id="app-root">
    <Onboarding client:load />
  </div>

  <!-- SEO: Server-rendered content for search engine crawlers -->
  <div id="seo-content">
    <main class="max-w-3xl mx-auto px-6 py-16 space-y-12" style="color: var(--th-text);">
      <header class="text-center space-y-4">
        <h1 class="text-3xl sm:text-4xl font-bold">Memento Vitae — Your Life, Visualized</h1>
        <p class="text-lg" style="color: var(--th-text-muted);">
          A free memento mori life calendar that turns your entire life into a grid of weeks.
        </p>
      </header>

      <section class="space-y-4">
        <h2 class="text-xl font-semibold">What is Memento Vitae?</h2>
        <p>
          Memento Vitae is a life visualization tool inspired by the ancient Stoic practice of <strong>memento mori</strong> — the meditation on mortality that reminds us to live fully. The name "Memento Vitae" means <em>"remember life."</em>
        </p>
        <p>
          Enter your birthdate and life expectancy, and instantly see your <strong>life in weeks</strong> — a powerful visual grid showing every week you've lived and every week that remains. It's the most direct way to make time tangible.
        </p>
      </section>

      <section class="space-y-4">
        <h2 class="text-xl font-semibold">Your Life in Weeks</h2>
        <p>
          The average human life is about <strong>4,000 weeks</strong>. When you see them all laid out in a single grid, something shifts. Each tiny square represents seven days — a week of mornings, meals, conversations, and choices. How many have you already used?
        </p>
        <p>
          Memento Vitae calculates exactly <strong>how many weeks you've lived</strong>, how many remain, how many summers are left, how many more times you'll visit your parents, and how much of your life you'll spend sleeping, working, or on your phone.
        </p>
      </section>

      <section class="space-y-4">
        <h2 class="text-xl font-semibold">Features</h2>
        <ul class="list-disc list-inside space-y-2" style="color: var(--th-text-muted);">
          <li><strong>Life Grid</strong> — See your entire life as weeks, months, or years</li>
          <li><strong>Time Categories</strong> — Visualize how you spend your time (sleep, work, family, hobbies)</li>
          <li><strong>Insight Cards</strong> — Discover how many Christmases, full moons, and parent visits remain</li>
          <li><strong>What-If Simulator</strong> — Adjust your habits and see the impact on your remaining time</li>
          <li><strong>Export Poster</strong> — Download a high-resolution image of your life grid</li>
          <li><strong>6 Beautiful Themes</strong> — Dark, light, sepia, ocean, forest, and rose</li>
        </ul>
      </section>

      <section class="space-y-4">
        <h2 class="text-xl font-semibold">The Memento Mori Tradition</h2>
        <p>
          <strong>Memento mori</strong> — Latin for "remember you will die" — is a philosophical practice dating back to ancient Rome. Stoic philosophers like Marcus Aurelius and Seneca used it not as morbid thinking, but as a tool for living with intention and gratitude.
        </p>
        <p>
          This <strong>memento mori calendar</strong> continues that tradition in digital form. By confronting the finite nature of your time, you gain clarity on what truly matters. As Seneca wrote: <em>"It is not that we have a short time to live, but that we waste a great deal of it."</em>
        </p>
      </section>

      <section class="space-y-4">
        <h2 class="text-xl font-semibold">How Many Weeks Do You Have Left?</h2>
        <p>
          If you're 30 years old with an average life expectancy of 80, you have roughly <strong>2,600 weeks remaining</strong>. That's about 50 summers, 50 Christmases, and maybe 300 more visits with your aging parents. Seeing these numbers makes abstract time concrete.
        </p>
        <p>
          Start your <strong>life expectancy visualization</strong> now — it takes less than a minute to set up, runs entirely in your browser, and your data never leaves your device.
        </p>
      </section>
    </main>
  </div>

  <script>
    // If user has already onboarded, redirect to dashboard
    if (typeof window !== 'undefined' && localStorage.getItem('onboarded') === 'true') {
      window.location.href = '/dashboard';
    }

    // Hide SEO content once the app has hydrated
    const seoContent = document.getElementById('seo-content');
    const appRoot = document.getElementById('app-root');
    if (appRoot && appRoot.children.length > 0) {
      seoContent?.remove();
    }
    // Also observe for when React mounts
    const observer = new MutationObserver(() => {
      if (appRoot && appRoot.querySelector('[data-onboarding]')) {
        seoContent?.remove();
        observer.disconnect();
      }
    });
    if (appRoot) observer.observe(appRoot, { childList: true, subtree: true });
  </script>
</Layout>
